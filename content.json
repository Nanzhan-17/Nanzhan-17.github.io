{"pages":[],"posts":[{"title":"Hello World","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new &quot;My New Post&quot; More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","link":"/2022/03/08/hello-world/"},{"title":"Windows10 和 VSCode 上Haskell的安装与环境搭建","text":"在Windows10 和 VSCode 上安装搭建Haskell环境 参考资料：【VS Code】Windows10下VS Code配置Haskell语言环境在整体的环境安装配置过程中，多处涉及到github链接和需要翻墙的链接，部分校园网可能会链接失败，可以尝试手机热点。 1. 下载安装Stack打开Stack官方文档，选择Windows 64-bit Installer进行下载，双击下载下来的exe文件进行安装，可以自定义C盘路径，但是要以管理员身份运行。 Windows 64-bit Installer 安装步骤1 安装过程中，还会自动将Stack添加到用户环境变量 PATH 中，同时会设置 STACK_ROOT=C:\\sr（安装程序的默认选项，记住这个路径，后面要考），安装完成后，可以在cmd终端输入命令“stack –help”来检验安装是否成功。 安装步骤2 2. 安装GHC（麻烦bug多）Stack可以用于管理Haskell编译器GHC和Haskell库，因此使用Stack安装GHC。 由于Haskell的生态和版本支持不是很好，如果你直接安装而不固定版本号，软件包的安装就容易引起冲突，导致各种依赖项间的不兼容。访问这个网站，查看Haskell最新的LTS，然后锁定在这个LTS上，此处我选择的是最新的LTS 18.27。 Stackage 一些辅助理解的概念（和配置环境关系不大，你可以不看）： Hackage是Haskell社区的开源软件包仓库 The Haskell Package Repository ，可以发布库和程序，或者使用Cabal-install这样的软件包管理器下载和安装软件包。 Stackage是 Stable Haskell package sets 的缩写，即稳定一致的Haskell包集合。它是一个Haskell软件包子集的发行版，来自Hackage并和它一同被社区构建起来。Stackage存在的意义在于，它提供了兼容一致且稳定的Haskell包集，每个包都选择了一个特定版本以满足软件包集合的自洽性，从而解决包版本的冲突问题、顺利构建和运行项目。 Stackage提供和维护了一堆不同的大版本，每个大版本都对应一个兼容一致稳定的Haskell包集，或者说是一个LTS Long Term Service ，被社区长期支持。我们选定了一个LTS之后，在下载安装时只可能发生某个包不存在的情况，就算出现冲突也能通过Stack来轻松解决，不会埋下一大堆“地雷”。 2.1 配置stack在cmd终端执行stack install，会发现下载经常失败。 1(ConnectionFailure user error (Network.Socket.gai_strerror not supported: 11004)) 这是因为下载过程中的一个网址需要翻墙才能访问，在不翻墙的情况下，需要进行换源才可以下载成功。 参考资料：关于stack换源的问题 其中提到了两个清华源的网址，“可以同时使用 TUNA 的 Stackage 源 + Hackage 源来解决”，分别是stackage 镜像使用帮助和hackage 镜像使用帮助。 在stackage 镜像使用帮助中提到“本镜像推荐与 TUNA 的 Hackage 镜像配合使用”，因此两个镜像源都需要添加。 2.2 换源：在终端输入stack --version查看stack版本，然后在上述两个源链接中分别找到对应版本的源进行更换，我的stack版本是2.7.3，在这里说明我的换源过程： （1）下载 stackage 镜像中提示的文件： stackage 镜像 下载图片下方蓝色链接的global-hints.yaml文件，在系统中找到对应的文件夹，不同下载路径对应的文件夹不同，此处的路径就是上文提及的记下来要考的路径： 默认路径下载时，直接在c盘路径输入%APPDATA%，然后回车就可以打开对应文件夹。 %APPDATA% 我下载的时候更改了默认路径，所以要修改的配置文件是%STACK_ROOT%\\config.yaml，配置文件对应的路径是上面记住要考的哪个C:\\sr\\config.yaml。 （2）更换源现在你已经找到了对应的目录，在此目录下的pantry文件夹内放入刚刚下载好的global-hints.yaml文件，并更改 stack（默认路径）或sr（我更改的路径）目录下的config.yaml，在此文件中增添两个镜像源中对应版本的代码，我的版本是2.7.3： stack hackage 即在config.yaml中增加以下代码： 123456789101112131415161718192021222324package-indices: - download-prefix: http://mirrors.tuna.tsinghua.edu.cn/hackage/ hackage-security: keyids: - 0a5c7ea47cd1b15f01f5f51a33adda7e655bc0f0b0615baa8e271f4c3351e21d - 1ea9ba32c526d1cc91ab5e5bd364ec5e9e8cb67179a471872f6e26f0ae773d42 - 280b10153a522681163658cb49f632cde3f38d768b736ddbc901d99a1a772833 - 2a96b1889dc221c17296fcc2bb34b908ca9734376f0f361660200935916ef201 - 2c6c3627bd6c982990239487f1abd02e08a02e6cf16edb105a8012d444d870c3 - 51f0161b906011b52c6613376b1ae937670da69322113a246a09f807c62f6921 - 772e9f4c7db33d251d5c6e357199c819e569d130857dc225549b40845ff0890d - aa315286e6ad281ad61182235533c41e806e5a787e0b6d1e7eef3f09d137d2e9 - fe331502606802feac15e514d9b9ea83fee8b6ffef71335479a2e68d84adc6b0 key-threshold: 3 # number of keys required # ignore expiration date, see https://github.com/commercialhaskell/stack/pull/4614 ignore-expiry: nosetup-info-locations: [&quot;http://mirrors.tuna.tsinghua.edu.cn/stackage/stack-setup.yaml&quot;]urls: latest-snapshot: http://mirrors.tuna.tsinghua.edu.cn/stackage/snapshots.jsonsnapshot-location-base: https://mirrors.tuna.tsinghua.edu.cn/stackage/stackage-snapshots/ （3）配置GHC回到终端，运行命令stack --resolver lts-18.27 setup下载lts，成功代码如下： 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253C:\\Users\\hp&gt;stack --resolver lts-18.27 setupWarning: http://mirrors.tuna.tsinghua.edu.cn/stackage/stack-setup.yaml: Unrecognized field in GHCDownloadInfo: versionPreparing to install GHC to an isolated location.This will not interfere with any system-level installation.Already downloaded.Downloaded 7z.dll.Downloaded 7z.exe.Decompressing ghc-8.10.7.tar.xz...7-Zip 9.20 Copyright (c) 1999-2010 Igor Pavlov 2010-11-18Processing archive: C:\\Users\\hp\\AppData\\Local\\Programs\\stack\\x86_64-windows\\ghc-8.10.7.tar.xzExtracting ghc-8.10.7.tarEverything is OkSize: 2768711680Compressed: 434126144Extracting ghc-8.10.7.tar...Extracted total of 10342 files from ghc-8.10.7.tarGHC installed to C:\\Users\\hp\\AppData\\Local\\Programs\\stack\\x86_64-windows\\ghc-8.10.7\\Downloaded msys2-20210604.Already downloaded.Already downloaded.Decompressing msys2-20210604.tar.xz...7-Zip 9.20 Copyright (c) 1999-2010 Igor Pavlov 2010-11-18Processing archive: C:\\Users\\hp\\AppData\\Local\\Programs\\stack\\x86_64-windows\\msys2-20210604.tar.xzExtracting msys2-20210604.tarEverything is OkSize: 390021120Compressed: 99822772Extracting msys2-20210604.tar...Extracted total of 17688 files from msys2-20210604.tarCopying skeleton files.These files are for the users to personalise their msys2 experience.They will never be overwritten nor automatically updated.'./.bashrc' -&gt; '/home/hp/.bashrc''./.bash_logout' -&gt; '/home/hp/.bash_logout''./.bash_profile' -&gt; '/home/hp/.bash_profile''./.inputrc' -&gt; '/home/hp/.inputrc''./.profile' -&gt; '/home/hp/.profile'\u001b[0mstack will use a sandboxed GHC it installed\u001b[0m\u001b[0mFor more information on paths, see 'stack path' and 'stack exec env'\u001b[0m\u001b[0mTo use this GHC and packages outside of a project, consider using:\u001b[0m\u001b[0mstack ghc, stack ghci, stack runghc, or stack exec\u001b[0m 测试一下GHC是否安装成功： 1234567C:\\Users\\hp&gt;stack exec -- ghc --versionThe Glorious Glasgow Haskell Compilation System, version 8.10.7C:\\Users\\hp&gt;stack exec -- ghciGHCi, version 8.10.7: https://www.haskell.org/ghc/ :? for helpPrelude&gt; :quitLeaving GHCi. 到此，我们已经有了一个可用的Stack和GHC（芜湖撒花）。 3.配置VSCode3.1 安装插件由于VSCode中的一部分插件版本过老，和新版本的GHC不匹配，因此下载旧版本的GHC做备用，一般来说LTS9不会出现冲突。 在终端执行以下命令进行安装，并检测安装是否成功： 12stack --resolver lts-9.21 setupstack --compiler ghc-8.0.2 exec -- ghc --version 配置完成后，在VSCode扩展中安装以下插件： Haskell ghc-mod Haskell-linter Haskell Syntax Highlighting Haskelly Haskell Code Runner 然后在终端配置插件，分别执行以下命令（这一步所需时间较长，如果一次没配置完，第二次重新打开终端时，需要重新输入chcp 65001） 1234chcp 65001stack --resolver lts-9.21 install ghc-modstack --resolver lts-9.21 install hlintstack --resolver lts-9.21 install intero QuickCheck stack-run 以上这些安装完成后，终端显示如下，不用管那个Warning，但是要记住他那个路径 C:\\Users\\hp\\AppData\\Roaming\\local\\bin，Stack安装的所有扩展应该都在这个路径中，这个路径在配置settings.json时需要用到。 安装完成 3.2 配置Haskell语言学习环境（1）配置ghc-mod、hlint、Code Runner在VSCode中打开 文件（File）- 首项选（Preferences）- 设置（Settings），点击下图红圈的位置，打开settings.json。 设置 settings.json 在settings.json文件中加入以下代码，注意在第8行末尾增加逗号，其中Haskell-linter配置的路径就是上面那个提示的路径。 12345678 /* Haskell ghc-mod配置 */ &quot;haskell.ghcMod.executablePath&quot;: &quot;stack&quot;, /* Haskell-linter配置 */ &quot;haskell.hlint.executablePath&quot;: &quot;C:\\\\Users\\\\hp\\\\AppData\\\\Roaming\\\\local\\\\bin\\\\hlint.exe&quot;, /* code-runner配置 */ &quot;code-runner.executorMap&quot;: { &quot;haskell&quot;: &quot;cd $dir &amp;&amp; stack runhaskell $fileName&quot;}, settings-over ** 2）配置Haskell**由于使用的是Stack，下列配置项要么添加到全局配置文件 $STACK_ROOT\\config.yaml 中，要么添加到项目配置文件 stack.yaml 中： 12ghc-options: '$everything': -haddock # 一个从带注释的Haskell源代码自动生成文档的工具 4. 尝试使用经过以上操作，haskell的环境基本搭建完毕，写一个简单的Hello World来测试是否成功。在VSCode运行.hs文件基本有以下三种方式： 在终端输入stack runhaskell &quot;.hs文件路径&quot;（最稳定）。 点击右上角的小三角运行按钮。 点击最下面蓝色行用红笔圈出的Run File运行文件。 可以看到成功输出了Hello World。 爷终于成功了哈哈哈哈哈 tips:在实际使用的过程中，想引用import System.Random时却发现系统提示没有这个模块，在查找了无数资料后，终于在这个网站中找到了可行的解决方案，可以尝试在终端输入下面的第一行代码，如果无效则尝试第二行代码： 12stack install randomstack ghci --package random 附：一些个人认为比较有用的Haskell入门资料 Haskell - 条件判断 Haskell系列（三）列表","link":"/2022/03/10/Windows10-%E5%92%8C-VSCode-%E4%B8%8AHaskell%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"},{"title":"计算机网络实验 Labexercise1-1 Protocol Layers","text":"前言：本博客包含Windows10下安装wget、Wireshark。 一些有用的链接： Labexercise1-1 Protocol Layers翻译 wireshark练习及答案lab-protocol-layers.docx Wireshark抓包使用指南 山东大学计算机网络实验 一些有用的提示：开始实验进行抓包时，校园网环境下的同学不建议使用一些 [ 上网不涉密涉密不上网 ] 的校园网进行抓包，可能会导致抓不到包捏 :)（找了半天bug，气死我了） 1. 下载安装wget参考资料：wget for windows 下载与安装 点击此链接，选择合适的版本下载.exe文件，然后把下好的.exe文件放在C:/windows/system32目录下即可。 在cmd终端输入wget --version，显示如下，则安装成功: 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849C:\\Users\\hp\\Desktop&gt;wget --versionGNU Wget 1.21.2 built on mingw32.+cares +digest +gpgme +https +ipv6 +iri +large-file +metalink -nls+ntlm +opie +psl +ssl/opensslWgetrc: /win32dev/misc/wget/out64/etc/wgetrc (system)Compile: x86_64-w64-mingw32-gcc -DHAVE_CONFIG_H -DSYSTEM_WGETRC=&quot;/win32dev/misc/wget/out64/etc/wgetrc&quot; -DLOCALEDIR=&quot;/win32dev/misc/wget/out64/share/locale&quot; -I. -I../../src -I../lib -I../../lib -I/win32dev/misc/wget/out64/include -I/win32dev/misc/wget/out64/include -I/win32dev/misc/wget/out64/include -I/win32dev/misc/wget/out64/include -DCARES_STATICLIB -I/win32dev/misc/wget/out64/include -DPCRE2_STATIC -I/win32dev/misc/wget/out64/include -DHAVE_LIBSSL -I/win32dev/misc/wget/out64/include -I/win32dev/misc/wget/out64/include -DNDEBUG -ggdbLink: x86_64-w64-mingw32-gcc -I/win32dev/misc/wget/out64/include -I/win32dev/misc/wget/out64/include -I/win32dev/misc/wget/out64/include -DCARES_STATICLIB -I/win32dev/misc/wget/out64/include -DPCRE2_STATIC -I/win32dev/misc/wget/out64/include -DHAVE_LIBSSL -I/win32dev/misc/wget/out64/include -I/win32dev/misc/wget/out64/include -DNDEBUG -ggdb -L/win32dev/misc/wget/out64/lib -L/win32dev/misc/wget/out64/lib -lmetalink -lunistring -liconv -L/win32dev/misc/wget/out64/lib -lcares -L/win32dev/misc/wget/out64/lib -lpcre2-8 -L/win32dev/misc/wget/out64/lib -lssl -lcrypto -L/win32dev/misc/wget/out64/lib -lz -L/win32dev/misc/wget/out64/lib -lpsl -lidn2 -lunistring -liconv -lws2_32 -lole32 -lcrypt32 -lexpat -L/win32dev/misc/wget/out64/lib -lgpgme -lassuan -lgpg-error ftp-opie.o mswindows.o openssl.o http-ntlm.o ../lib/libgnu.a -lws2_32 -lws2_32 -lws2_32 -lws2_32 -lws2_32 -lws2_32 /win32dev/misc/wget/out64/lib/libiconv.a /win32dev/misc/wget/out64/lib/libunistring.a -lws2_32Copyright (C) 2015 Free Software Foundation, Inc.License GPLv3+: GNU GPL version 3 or later&lt;http://www.gnu.org/licenses/gpl.html&gt;.This is free software: you are free to change and redistribute it.There is NO WARRANTY, to the extent permitted by law.Originally written by Hrvoje Niksic &lt;hniksic@xemacs.org&gt;.Please send bug reports and questions to &lt;bug-wget@gnu.org&gt;. 尝试使用wget时，可以在终端输入wget 网址把目标链接下载到当前目录下，也可以输入wegt -p 指定目录 网址把目标链接下载到指定目录下。 2. 下载安装Wireshark参考资料：win10安装抓包工具wireshark 在Wireshark的官网下载地址中，在Stable Release中选择符合你计算机型号的安装包，我Windows10 64位电脑选择的是 Windows Installer (64-bit)，双击下载的.exe文件进行安装。 如果你仅仅只是为了完成课程实验，在安装的过程当中可以一路无脑next，在选择安装路径时可以更改为你想要的路径。 3.开始实验Step 1-3打开Wireshark，界面如下图所示，选择WLAN，点击捕获-选项。 在捕获选项界面，仅勾选WLAN，取消其他接口的混杂，在下方绿色的部分输入tcp port 80，使用“tcp端口80”筛选器启动捕获。 打开cmd终端，抓包一个网站，这里选择的是https://www.baidu.com/，网页获取完成后，立刻在Wireshark点击左上角的停止（红色正方形），显示如下图。 找到上方Protocol为HTTP，且Info是GET的，点击蓝色部分的Hypertext，可以看到整个窗口的最下方显示415 byte(s)，这是HTTP的实际有效开销。 接下来分别查看以太网（Ethernet）、IP、TCP占用的字节，分别如下为14 types、20 types、20 types。 由此，可以回答实验报告中的第一个 turn in：Step 3: Packet StructureTurn-in: Hand in your packet drawing. Step 4Protocol Overhead指的是协议开销，由于协议本身的报头等内容也需要占用一定的空间，用来标识该种协议、报文内各个字段的含义等信息，这种内容就是协议开销了。下载的包从一个Info中带有SYN，ACK信号的包开始，到下面第一个遇到的HTTP包后面的TCP包为止。 由此，可以回答实验报告中的第二个 turn in：Your estimate of download protocol overhead as defined above. Tell us whether you find this overhead to be significant.协议开销一共有 66+54+469+66=665字节HTTP有效开销一共有415字节，415/665≈62.41%，协议开销占比较小。 Step 5点击中间那一栏的以太网和IP，分别可以从Type和Protocol中找到第五步问题的答案。 由此，可以回答实验报告中的第三个 turn in： Which Ethernet header field is the demultiplexing key that tells it the next higher layer is IP? What value is used in this field to indicate “IP”?以太网报头字段是Type，对应的值是0x0800。 Which IP header field is the demultiplexing key that tells it the next higher layer is TCP? What value is used in this field to indicate “TCP”?IP报头字段是Protocol，对应的值是6。","link":"/2022/03/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C-Labexercise1-1-Protocol-Layers/"},{"title":"基于Icarus5.x的主题美化改造","text":"基于Icarus5.x的主题美化改造看了下网上的教程，Hexo Icarus主题的美化改造大部分是基于2.x/3.x，用的都是ejs文件，而Icarus在4.x版本之后就用jsx文件进行编写了，网上那些美化的代码也不能完全适用，即使在Icarus官网4.x美化的教程中，也有一部分配置文件和5.x不一致，因此我打算写一个博客来记录下我给Icarus5.0.0美化的过程。 一些有用但不完全有用的资料这些资料大部分基于Icarus4.x主题，有一定的参考价值，但在一些小细节上有一定出入。 Icarus用户指南 Icarus 主题自定义 hexo更换icarus主题和美化 到 ICARUS 中去 —— 记对 Icarus 主题的使用及微调 给博文添加ReadMore在Icarus还是ejs的时代，可以根据这位大佬的教程来编写ejs文件实现自动添加ReamMore的效果，但是在5.0版本中，我只能自己手动在博文里添加ReadMore。在_config.icarus.yml文件中添加以下代码： 123#read more auto_excerpt: enable: true 然后在你的博客md里面你想要的位置手动添加&lt;!--more--&gt;。 添加访客地球小组件 功能：展示页面的总浏览量/页面浏览人来源的的热力图/同时在线人的地址标签 地址：RevolverMaps官网 找到.\\themes\\icarus\\layout\\common\\scripts.jsx，在return部分做出如下修改： 12345678910111213 return &lt;Fragment&gt; &lt;script src={cdn('jquery', '3.3.1', 'dist/jquery.min.js')}&gt;&lt;/script&gt; &lt;script src={cdn('moment', '2.22.2', 'min/moment-with-locales.min.js')}&gt;&lt;/script&gt; {clipboard &amp;&amp; &lt;script src={cdn('clipboard', '2.0.4', 'dist/clipboard.min.js')} defer&gt;&lt;/script&gt;} &lt;script dangerouslySetInnerHTML={{ __html: `moment.locale(&quot;${language}&quot;);` }}&gt;&lt;/script&gt; &lt;script dangerouslySetInnerHTML={{ __html: embeddedConfig }}&gt;&lt;/script&gt; &lt;script src={url_for('/js/column.js')}&gt;&lt;/script&gt; &lt;Plugins site={site} config={config} page={page} helper={helper} head={false} /&gt; &lt;script src={url_for('/js/main.js')} defer&gt;&lt;/script&gt; &lt;script src={url_for('/js/clicklove.js')} defer={true}&gt;&lt;/script&gt; &lt;script type=&quot;text/javascript&quot;color=&quot;220,220,220&quot; opacity='0.7' zIndex=&quot;-2&quot; count=&quot;200&quot; src=&quot;//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js&quot;&gt;&lt;/script&gt;+ &lt;script type=&quot;text/javascript&quot; src=&quot;//rf.revolvermaps.com/0/0/6.js?i=53u8jvixw8q&amp;amp;m=7&amp;amp;c=e63100&amp;amp;cr1=ffffff&amp;amp;f=arial&amp;amp;l=0&amp;amp;bv=90&amp;amp;lx=-420&amp;amp;ly=420&amp;amp;hi=20&amp;amp;he=7&amp;amp;hc=a8ddff&amp;amp;rs=80&quot; async=&quot;async&quot;&gt;&lt;/script&gt; &lt;/Fragment&gt;; 添加的那一行代码为： 1&lt;script type=&quot;text/javascript&quot; src=&quot;//rf.revolvermaps.com/0/0/6.js?i=53u8jvixw8q&amp;amp;m=7&amp;amp;c=e63100&amp;amp;cr1=ffffff&amp;amp;f=arial&amp;amp;l=0&amp;amp;bv=90&amp;amp;lx=-420&amp;amp;ly=420&amp;amp;hi=20&amp;amp;he=7&amp;amp;hc=a8ddff&amp;amp;rs=80&quot; async=&quot;async&quot;&gt;&lt;/script&gt; 然后在.\\themes\\icarus\\layout\\widget中新建map.jsx文件，把以下代码复制到这个文件中： 12345678910111213const { Component } = require('inferno');const gravatrHelper = require('hexo-util').gravatar;const { cacheComponent } = require('hexo-component-inferno/lib/util/cache');class Profile extends Component { render() { return &lt;Fragment&gt; &lt;script type=&quot;text/javascript&quot; src=&quot;//rf.revolvermaps.com/0/0/6.js?i=53u8jvixw8q&amp;amp;m=7&amp;amp;c=e63100&amp;amp;cr1=ffffff&amp;amp;f=arial&amp;amp;l=0&amp;amp;bv=90&amp;amp;lx=-420&amp;amp;ly=420&amp;amp;hi=20&amp;amp;he=7&amp;amp;hc=a8ddff&amp;amp;rs=80&quot; async=&quot;async&quot;&gt;&lt;/script&gt; &lt;/Fragment&gt;; }}module.exports = Profile; 最后打开Icarus的全局配置文件_config.icarus.yml，找到widgets栏，添加如下代码： 1234# 地球小组件- type: map position: right 主页是三栏，点开文章变两栏主要参考了这位大佬的教程，具体过程比较坎坷，为了省事你可以把.\\themes\\icarus\\layout\\layout.jsx整体替换为以下代码： 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273const { Component } = require('inferno');const classname = require('hexo-component-inferno/lib/util/classname');const Head = require('./common/head');const Navbar = require('./common/navbar');const Widgets = require('./common/widgets');const Footer = require('./common/footer');const Scripts = require('./common/scripts');const Search = require('./common/search');module.exports = class extends Component { render() { const { site, config, page, helper, body } = this.props; const language = page.lang || page.language || config.language; const columnCount = Widgets.getColumnCount(config.widgets, config, page); if(page.path==='index.html'){ return &lt;html lang={language ? language.substr(0, 2) : ''}&gt; &lt;Head site={site} config={config} helper={helper} page={page} /&gt; &lt;body class={`is-3-column`}&gt; &lt;Navbar config={config} helper={helper} page={page} /&gt; &lt;section class=&quot;section&quot;&gt; &lt;div class=&quot;container&quot;&gt; &lt;div class=&quot;columns&quot;&gt; &lt;div class={classname({ column: true, 'order-2': true, 'column-main': true, 'is-12': columnCount === 1, 'is-8-tablet is-8-desktop is-9-widescreen': columnCount === 2, 'is-8-tablet is-8-desktop is-6-widescreen': columnCount === 3 })} dangerouslySetInnerHTML={{ __html: body }}&gt;&lt;/div&gt; &lt;Widgets site={site} config={config} helper={helper} page={page} position={'left'} /&gt; &lt;Widgets site={site} config={config} helper={helper} page={page} position={'right'} /&gt; &lt;/div&gt; &lt;/div&gt; &lt;/section&gt; &lt;Footer config={config} helper={helper} /&gt; &lt;Scripts site={site} config={config} helper={helper} page={page} /&gt; &lt;Search config={config} helper={helper} /&gt; &lt;/body&gt; &lt;/html&gt;; } else{ return &lt;html lang={language ? language.substr(0, 2) : ''}&gt; &lt;Head site={site} config={config} helper={helper} page={page} /&gt; &lt;body class={`is-3-column`}&gt; &lt;Navbar config={config} helper={helper} page={page} /&gt; &lt;section class=&quot;section&quot;&gt; &lt;div class=&quot;container&quot;&gt; &lt;div class=&quot;columns&quot;&gt; &lt;div class={classname({ column: true, 'order-2': true, 'column-main': true, 'is-12': columnCount === 1, 'is-8-tablet is-8-desktop is-9-widescreen': columnCount === 2, 'is-8-tablet is-8-desktop is-9-widescreen': columnCount === 3 })} dangerouslySetInnerHTML={{ __html: body }}&gt;&lt;/div&gt; &lt;Widgets site={site} config={config} helper={helper} page={page} position={'left'} /&gt; &lt;/div&gt; &lt;/div&gt; &lt;/section&gt; &lt;Footer config={config} helper={helper} /&gt; &lt;Scripts site={site} config={config} helper={helper} page={page} /&gt; &lt;Search config={config} helper={helper} /&gt; &lt;/body&gt; &lt;/html&gt;; } }}; 给文章添加黏性目录和访问量黏性目录在toc.js文件中大概213行处做如下修改： hexo\\node_modules\\hexo-component-inferno\\lib\\view\\widget\\toc.js123456 var css = '#toc .menu-list &gt; li &gt; a.is-active + .menu-list { display: block; }' + '#toc .menu-list &gt; li &gt; a + .menu-list { display: none; }';- return (0, _inferno.createVNode)(1, &quot;div&quot;, &quot;card widget&quot;, [(0, _inferno.createVNode)(1, &quot;div&quot;, &quot;card-content&quot;, (0, _inferno.createVNode)(1, &quot;div&quot;, &quot;menu&quot;, [(0, _inferno.createVNode)(1, &quot;h3&quot;, &quot;menu-label&quot;, this.props.title, 0), this.renderToc(toc, showIndex)], 0), 2), collapsed ? (0, _inferno.createVNode)(1, &quot;style&quot;, null, null, 1, {+ return (0, _inferno.createVNode)(1, &quot;div&quot;, &quot;card widget is-3-column-toc&quot;, [(0, _inferno.createVNode)(1, &quot;div&quot;, &quot;card-content&quot;, (0, _inferno.createVNode)(1, &quot;div&quot;, &quot;menu&quot;, [(0, _inferno.createVNode)(1, &quot;h3&quot;, &quot;menu-label&quot;, this.props.title, 0), this.renderToc(toc, showIndex)], 0), 2), collapsed ? (0, _inferno.createVNode)(1, &quot;style&quot;, null, null, 1, { &quot;dangerouslySetInnerHTML&quot;: { __html: css } 并在style.styl中增加以下代码： .\\themes\\icarus\\source\\css\\style.styl12345678/* 黏性目录 */.is-1-column-toc /* 如当前列数为1，则目录采用原来的样式 */.is-2-column-toc, .is-3-column-toc /* 如当前列数为2或3，则目录采用粘性布局 */ position: sticky position: -webkit-sticky top: 0 z-index: 1 访问量将主题配置文件_config.icarus.yml的 plugins &gt; busuanzi 设置为 true 即可 给文章添加评论区官方文档Icarus用户指南 - 用户评论插件提供了十多种可以适配Icarus的评论插件，在对比了安全性和易上手度之后，我选择的是Waline评论区插件。 （1）按照Waline官方文档快速上手创建LeanCloud应用和Vercel项目，在Vercel 部署 (服务端)这一步中选择GitHub登录，项目库选择你博客所在的仓库。 （2）对于Waline插件的引入，在.\\themes\\icarus\\layout\\common\\scripts.jsx的return部分添加以下代码： 1&lt;script src=&quot;//cdn.jsdelivr.net/npm/@waline/client&quot;&gt;&lt;/script&gt; （3）将你Vercel项目的”服务器地址“(Server URL)复制到主题配置的对应配置项中。 _config.icarus.yml123456789101112131415161718192021comment: type: waline server_url: https://your-domain.vercel.app lang: zh-CN # 可选填 visitor: false # 可选填 emoji: # 可选填 - 'https://cdn.jsdelivr.net/gh/walinejs/emojis/weibo' dark: auto # 可选填 meta: [&quot;nick&quot;, &quot;mail&quot;, &quot;link&quot;] # 可选填 required_meta: [] # 可选填 login: enable # 可选填 avatar: mp # 可选填 word_limit: 0 # 可选填 page_size: 10 # 可选填 avatar_cdn: 'https://sdn.geekzu.org/avatar/' # 可选填 avatar_force: false # 可选填 highlight: true # 可选填 math_tag_support: false # 可选填 copyright: true # 可选填 locale: # 可选填 placeholder: 'Comment here...' tips： 对于Waline插件的更多了解和样式设计可以参照官方文档客户端介绍。 自定义网站的logo和favicon可以搜索在线制图网站生成你的图标和logo，这里推荐LOGO神器，在这里可以只能生成各种好看的图标和logo，但是生成后需要购买会员来下载文件（不过你可以把生成的图片直接截图再抠图就是了）。 将生成的图片转化为svg格式推荐onlineconvertfree，这个网站可以免费进行图片格式的转换，下载转换后的图片也非常方便。","link":"/2022/03/15/%E5%9F%BA%E4%BA%8EIcarus5-x%E7%9A%84%E4%B8%BB%E9%A2%98%E7%BE%8E%E5%8C%96%E6%94%B9%E9%80%A0/"}],"tags":[{"name":"编译原理与设计","slug":"编译原理与设计","link":"/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E4%B8%8E%E8%AE%BE%E8%AE%A1/"},{"name":"Hello World","slug":"Hello-World","link":"/tags/Hello-World/"},{"name":"计算机网络","slug":"计算机网络","link":"/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"},{"name":"Hexo &amp; Icarus","slug":"Hexo-Icarus","link":"/tags/Hexo-Icarus/"}],"categories":[{"name":"Guide","slug":"Guide","link":"/categories/Guide/"},{"name":"Experimental report","slug":"Experimental-report","link":"/categories/Experimental-report/"},{"name":"Life &amp; Hello-world","slug":"Life-Hello-world","link":"/categories/Life-Hello-world/"},{"name":"Hello-world","slug":"Life-Hello-world/Hello-world","link":"/categories/Life-Hello-world/Hello-world/"}]}